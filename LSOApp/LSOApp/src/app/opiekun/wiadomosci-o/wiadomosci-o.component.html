<FlexboxLayout class="back wh100 center" justifyContent="flex-start">
    <ScrollView>
        <StackLayout width="100%">
            <FlexboxLayout class="center">

                <DockLayout>

                    <FlexboxLayout class="flexEnd" *ngIf="!pisanieWiadomosci" dock="top">
                        <Button text="Utwórz nową" (tap)="otworz()" class="btn b-p-10 audiowide" [isEnabled]="!ui.ladowane[2]"></Button>
                    </FlexboxLayout>

                        <GridLayout columns="auto,*" rows="auto,*" class="grid" *ngIf="pisanieWiadomosci" dock="top">
                            <FlexboxLayout class="red black" col="0" row="0" colSpan="2"></FlexboxLayout>
                            <StackLayout class="center" margin="7" col="0" row="0">
                                <Label text="00:00" class="godzina black lexend"></Label>
                                <Label text="04/02/2000" class="data black lexend"></Label>
                            </StackLayout>
                            <FlexboxLayout class="wiadomosc b-p-10 center" col="1" row="0" rowSpan="2">
                                <!-- <Label text="OPIEKUN" class="autor"></Label> -->
                                <TextView [(ngModel)]="tresc" hint="Wpisz treść wiadomosci" class="textview lexend" #textview></TextView>
                                <FlexboxLayout class="flexEnd">
                                    <Button [text]="tresc.length >= 1? 'Wyślij' : 'Zamknij'" (tap)="wyslij()" class="btn b-p-10 audiowide"></Button>
                                </FlexboxLayout>
                            </FlexboxLayout>
                        </GridLayout>
                </DockLayout>




                <ng-containter *ngIf="!ui.ladowane[2]" orientation="vertical">
                    <Label text="Brak wiadomości" class="brak lexend" *ngIf="wiadomosci.length === 0"></Label>
                    <GridLayout *ngFor="let wiadomosc of wiadomosci" columns="auto,*" rows="auto,*" class="grid" (longPress)="usunWiadomosc(wiadomosc)">
                        <FlexboxLayout class="red b-p-10" col="0" row="0" colSpan="2"></FlexboxLayout>
                        <StackLayout class="center" margin="7" marginLeft="15" col="0" row="0">
                            <Label [text]="wiadomosc.data.toString() | godzina" class="godzina lexend"></Label>
                            <Label
                                [text]="dataFormat(wiadomosc)"
                                class="data lexend"></Label>
                        </StackLayout>
                        <FlexboxLayout class="wiadomosc b-p-10 center" col="1" row="0" rowSpan="2">
                            <Label [text]="wiadomosc.autor_id === 0 ?  'ADMINISTRATOR' : 'OPIEKUN'" class="autor lexend"></Label>
                            <Label [text]="wiadomosc.tresc" class="tresc lexend"></Label>
                            <Image [src]="wiadomosc.linkobrazu" class="obraz lexend" *ngIf="wiadomosc.linkobrazu"></Image>
                            <Button text="Pobierz obraz" class="btn audiowide b-p-10" (tap)="pobierzObraz(wiadomosc.linkobrazu)" *ngIf="wiadomosc.linkobrazu"></Button>
                        </FlexboxLayout>
                    </GridLayout>
                </ng-containter>

                <FlexboxLayout class="wh100 center" *ngIf="ui.ladowane[2]">
                        <ActivityIndicator [busy]="true"></ActivityIndicator>
                </FlexboxLayout>

            </FlexboxLayout>
        </StackLayout>
    </ScrollView>
</FlexboxLayout>
